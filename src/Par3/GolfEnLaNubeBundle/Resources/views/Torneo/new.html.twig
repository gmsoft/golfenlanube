{% extends 'GolfEnLaNubeBundle::layout.html.twig' %}

{% block stylesheets %}
	<link href="{{ asset('/bundles/golfenlanube/css/jquery-ui-1.10.4.custom.min.css') }}" rel="stylesheet" />
	<link href="{{ asset('/bundles/golfenlanube/css/select2/select2.css') }}" rel="stylesheet" />
	<link href="{{ asset('/bundles/golfenlanube/css/select2/select2-bootstrap.css') }}" rel="stylesheet" />
	{{ form_stylesheet(form) }}
{% endblock %}

{% block page_header -%}
	<h3>Nuevo Torneo</h3>
{% endblock %}

{% block body %}

	<div class='row'>
		<div class='col-md-12'>
			{#{ form(form, {'style': 'horizontal'}) }#}
	    		{{ include( 'GolfEnLaNubeBundle:Torneo:form.html.twig', {'form': form } ) }}
		</div>
	</div>

	<div class='row'>
		<div class='col-md-12'>
			<ul class="record_actions list-inline">
				<li>
					<a href="{{ path('admin_temporada_show_torneos', {'id': entity.temporada.id }) }}">
						Volver
					</a>
			
				</li>
			</ul>
		</div>
	</div>

{% endblock %}

{% block javascripts %}
	<script src="{{ asset('/bundles/golfenlanube/js/jquery-ui-1.10.4.custom.min.js') }}" ></script>
	<script src="{{ asset('/bundles/golfenlanube/js/select2/select2.min.js') }}" ></script>
	{{ form_javascript(form) }}
	
	<script type="text/javascript" >


	function setDefaultYMinDatePicker(id_field , date) 
	{
		$('#' + id_field ).datepicker('option', 'minDate', date);
		$('#' + id_field ).datepicker('option', 'defaultDate', date);
		$('#' + id_field ).datepicker("setDate", date);
	}
		
	
	    jQuery(document).ready(function($) {
	        var $field = $('#par3_golfenlanubebundle_torneo_apertura_inscripcion');
	        var $configs = $.extend({
	            dateFormat:"dd-mm-yy", 
	            minDate: new Date (),  
	            changeYear: true, 

	            onSelect: function(dateStr) {
	            	var date = $(this).datepicker('getDate');
	            	date.setDate(date.getDate() + 1); 
	            	setDefaultYMinDatePicker('par3_golfenlanubebundle_torneo_cierre_inscripcion', date) 

	            	date.setDate(date.getDate() + 1); 
	            	setDefaultYMinDatePicker('par3_golfenlanubebundle_torneo_inicio', date) 
	            }
	        }, $.datepicker.regional['es']);
	
	        $field.datepicker($configs);	
	    });
		

	    jQuery(document).ready(function($) {
	        var $field = $('#par3_golfenlanubebundle_torneo_cierre_inscripcion');
	        var $configs = $.extend({
	            dateFormat:"dd-mm-yy", 
	            minDate: new Date (),  
	            changeYear: true, 

	            onSelect: function(dateStr) {
	            	var date = $(this).datepicker('getDate');
	            	date.setDate(date.getDate() + 1); 
	            	setDefaultYMinDatePicker('par3_golfenlanubebundle_torneo_inicio', date) 
	            }
	        }, $.datepicker.regional['es']);

	        $field.datepicker($configs);	
	    });


	    jQuery(document).ready(function($) {
	        var $field = $('#par3_golfenlanubebundle_torneo_inicio');
	        var $configs = $.extend({
	            dateFormat:"dd-mm-yy", 
	            minDate: new Date (),  
	            changeYear: true
	        }, $.datepicker.regional['es']);
	
	        $field.datepicker($configs);	
	    });
	    
		$(document).ready( function () {

		    function configurarHoyosPorDia(campo_total_hoyos)
			{
				var total_hoyos = $(campo_total_hoyos).find(':selected').val().split(';');
				var hoyos = total_hoyos[0]; 
				var dias = total_hoyos[1];
				
				$('#par3_golfenlanubebundle_torneo_fechas_0_hoyos').val(hoyos);
				$('#par3_golfenlanubebundle_torneo_dias').val(dias);
			}
			
			configurarHoyosPorDia( $('#par3_golfenlanubebundle_torneo_total_hoyos') );
			
			$('#par3_golfenlanubebundle_torneo_total_hoyos').on('change', function () {
				configurarHoyosPorDia(this);
			});
		
			// $('#par3_golfenlanubebundle_torneo_torneo_vueltas_0_cancha').select2();
			
		});
	</script>
{% endblock %}
